<button class="back-btn" (click)="back()"><mat-icon>arrow_back</mat-icon></button>

<div class="container">
  <h2 class="text-center">Créer un nouvel article</h2>

  <form [formGroup]="articleForm" (ngSubmit)="onSubmit()">
    <mat-form-field appearance="outline" class="full-width" hideRequiredMarker="true">
      <mat-select formControlName="theme" placeholder="Sélectionner un thème">
        @for (themeOption of themes(); track themeOption.id) {
          <mat-option [value]="themeOption.id">{{ themeOption.title }}</mat-option>
        }
      </mat-select>
      @if (theme?.invalid && theme?.touched) {
        <mat-error>Veuillez sélectionner un thème</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Titre de l'article</mat-label>
      <input matInput formControlName="title" placeholder="Titre de l'article">
      @if (title?.invalid && title?.touched) {
        <mat-error>
          @if (title?.errors?.['required']) {
            Le titre est requis
          } @else if (title?.errors?.['minlength']) {
            Le titre doit contenir au moins 5 caractères
          } @else if (title?.errors?.['maxlength']) {
            Le titre ne peut pas dépasser 100 caractères
          }
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Contenu de l'article</mat-label>
      <textarea matInput formControlName="content" rows="10" placeholder="Contenu de l'article"></textarea>
      @if (content?.invalid && content?.touched) {
        <mat-error>
          @if (content?.errors?.['required']) {
            Le contenu est requis
          } @else if (content?.errors?.['minlength']) {
            Le contenu doit contenir au moins 50 caractères
          } @else if (content?.errors?.['maxlength']) {
            Le contenu ne peut pas dépasser 2000 caractères
          }
        </mat-error>
      }
    </mat-form-field>

    <div class="flex justify-content-center">
      <button
        type="submit"
        matButton="filled"
        color="primary"
        [disabled]="articleForm.invalid || isSubmitting">
        @if (isSubmitting) {
          Création...
        } @else {
          Créer
        }
      </button>
    </div>
  </form>
</div>

