<div class="comment-form">
  <form [formGroup]="commentForm" (ngSubmit)="onSubmit()">
    <div class="form-content">
      <div class="textarea-group">
        <textarea
          formControlName="content"
          placeholder="Écrivez ici votre commentaire"
          class="comment-textarea"
          [class.error]="content?.invalid && content?.touched">
        </textarea>
      </div>

      <button
        type="submit"
        class="send-button"
        [disabled]="commentForm.invalid || isSubmitting">
        <img src="/assets/send.png" alt="Envoyer" />
        @if (isSubmitting) {
          <span>Envoi...</span>
        }
      </button>
    </div>

    @if (content?.invalid && content?.touched) {
      <div class="error-message">
        @if (content?.errors?.['required']) {
          <span>Le commentaire doit contenir entre 10 et 500 caractères</span>
        }
        @if (content?.errors?.['minlength']) {
          <span>Le commentaire doit contenir au moins 10 caractères</span>
        }
        @if (content?.errors?.['maxlength']) {
          <span>Le commentaire ne peut pas dépasser 500 caractères</span>
        }
      </div>
    }
  </form>
</div>
